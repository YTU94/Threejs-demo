<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>AddCube</title>
	<script src="./lib/three.min.js"></script>
	<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>	
</head>
<body>
<div id="WebGL-output"></div>
<button id="" onclick="addCube()">addCube</button>
<script>
	$(function(){
		var renderer = new THREE.WebGLRenderer();
		renderer.setClearColor(0xeeeeee);
		renderer.setSize(window.innerWidth,window.innerHeight);
		var scene = new THREE.Scene();
		var camera = new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,0.1,1000);
		camera.position.set(10,1,1);
		camera.lookAt(scene.position);
		scene.add(camera);
		var planeGeometry = new THREE.PlaneGeometry(10,10,1,1);
		var planeMaterial = new THREE.MeshLambertMaterial({color: 0xffffff});
		var plane = new THREE.Mesh(planeGeometry,planeMaterial);
		plane.rotation.x = -Math.PI/2;
		scene.add(plane);

		var ambientLight = new THREE.AmbientLight(0x0c0c0c);
		scene.add(ambientLight);

		var spotLight = new THREE.SpotLight(0xFFFFFF);
		scene.add(spotLight);

        this.addCube = function(){
            var cubeSize = Math.ceil((Math.random()*3));
            console.log(cubeSize);
            var CubeGeometry = new THREE.CubeGeometry(cubeSize,cubeSize,cubeSize);
            var cubeMaterial = new THREE.MeshLambertMaterial(
                {color:  0xff0000});
            var cube = new THREE.Mesh(CubeGeometry,cubeMaterial);
            cube.castShadow = true;
            cube.name = "cube-"+ scene.children.length;
            cube.position.x = -3 + Math.round((Math.random()*4));
            cube.position.y = Math.round((Math.random()*3));
            cube.position.z = -2 + Math.round((Math.random()*4));
            this.numberOfObjects = scene.children.length; 
            
            scene.add(cube);
            console.log(scene);
            $('#WebGL-output').append(renderer.domElement);
            renderer.render(scene,camera);
        };

	});
</script>
</body>
</html>